

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Chapter 6: Web2Py Installation &mdash; Python for Network Engineers</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Python for Network Engineers" href="index.html"/>
        <link rel="prev" title="Chapter 5: Web2Py Introduction" href="web2py-introduction.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> arista-python-web2py
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="preface.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Chapter 1: Introducing Python Core Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="core-concepts.html">Chapter 2: Script Framework for Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Chapter 3: Troubleshooting Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="capacity-planning.html">Chapter 4: Capacity Planning Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="web2py-introduction.html">Chapter 5: Web2Py Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Chapter 6: Web2Py Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#install-required-packages">Install Required Packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#about-my-linux">About My Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-required-packages-for-python-development">Install Required Packages for Python Development</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-python-modules">Install Python modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-apache">Install Apache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-ssl-certificate">Create SSL Certificate</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#install-web2py">Install Web2Py</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configure-apache-to-use-mod-wsgi">Configure Apache to use mod_wsgi</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#start-web2py-service">Start Web2Py Service</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#verify-web2py-portal">Verify Web2Py Portal</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">arista-python-web2py</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Chapter 6: Web2Py Installation</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/web2py-installation.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="chapter-6-web2py-installation">
<h1>Chapter 6: Web2Py Installation<a class="headerlink" href="#chapter-6-web2py-installation" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#install-required-packages" id="id1">Install Required Packages</a><ul>
<li><a class="reference internal" href="#about-my-linux" id="id2">About My Linux</a></li>
<li><a class="reference internal" href="#install-required-packages-for-python-development" id="id3">Install Required Packages for Python Development</a></li>
<li><a class="reference internal" href="#install-python-modules" id="id4">Install Python modules</a></li>
<li><a class="reference internal" href="#install-apache" id="id5">Install Apache</a></li>
<li><a class="reference internal" href="#create-ssl-certificate" id="id6">Create SSL Certificate</a></li>
</ul>
</li>
<li><a class="reference internal" href="#install-web2py" id="id7">Install Web2Py</a><ul>
<li><a class="reference internal" href="#configure-apache-to-use-mod-wsgi" id="id8">Configure Apache to use mod_wsgi</a></li>
</ul>
</li>
<li><a class="reference internal" href="#start-web2py-service" id="id9">Start Web2Py Service</a><ul>
<li><a class="reference internal" href="#verify-web2py-portal" id="id10">Verify Web2Py Portal</a></li>
</ul>
</li>
</ul>
</div>
<p>Web2py is an open source full stack framework. You can download web2py from <a class="reference external" href="http://web2py.com/init/default/download">http://web2py.com/init/default/download</a>. You can install it on Windows, Apple Mac or any of the Linux distributions. Installation instruction is documented here <a class="reference external" href="http://web2py.com/books/default/chapter/29/13/deployment-recipes">http://web2py.com/books/default/chapter/29/13/deployment-recipes</a>. In this chapter, we will show you how to install web2py in Ubuntu. Below is the quick installation steps to install and setup web2py on Ubuntu running Apache as the web server.</p>
<div class="section" id="install-required-packages">
<h2><a class="toc-backref" href="#id1">Install Required Packages</a><a class="headerlink" href="#install-required-packages" title="Permalink to this headline">¶</a></h2>
<div class="section" id="about-my-linux">
<h3><a class="toc-backref" href="#id2">About My Linux</a><a class="headerlink" href="#about-my-linux" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span></span>anees@ubuntu-web2py:~$ uname -a
Linux ubuntu-web2py 3.16.0-30-generic <span class="c1">#40~14.04.1-Ubuntu SMP Thu Jan 15 17:43:14 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux</span>

anees@ubuntu-web2py:~$ python --version
Python 2.7.6

anees@ubuntu-web2py:/$ ifconfig
eth0      Link encap:Ethernet  HWaddr 00:0c:29:98:c8:32
          inet addr:172.28.170.197  Bcast:172.28.171.255  Mask:255.255.254.0
          inet6 addr: fe80::20c:29ff:fe98:c832/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:97480 errors:0 dropped:0 overruns:0 frame:0
          TX packets:58948 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:111218578 <span class="o">(</span>111.2 MB<span class="o">)</span>  TX bytes:10125393 <span class="o">(</span>10.1 MB<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="install-required-packages-for-python-development">
<h3><a class="toc-backref" href="#id3">Install Required Packages for Python Development</a><a class="headerlink" href="#install-required-packages-for-python-development" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span></span>anees@ubuntu-anees-1:~$ sudo apt-get install build-essential python-dev libsqlite3-dev libreadline6-dev libgdbm-dev zlib1g-dev libbz2-dev sqlite3 zip libssl-dev
</pre></div>
</div>
</div>
<div class="section" id="install-python-modules">
<h3><a class="toc-backref" href="#id4">Install Python modules</a><a class="headerlink" href="#install-python-modules" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span></span>anees@ubuntu-web2py:~$ sudo apt-get install python-pip

anees@ubuntu-web2py:~$ sudo pip install pyeapi

anees@ubuntu-web2py:~$ sudo pip install jsonrpc
</pre></div>
</div>
</div>
<div class="section" id="install-apache">
<h3><a class="toc-backref" href="#id5">Install Apache</a><a class="headerlink" href="#install-apache" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span></span>anees@ubuntu-web2py:~$ sudo apt-get install apache2
anees@ubuntu-web2py:~$ sudo apt-get install libapache2-mod-wsgi
anees@ubuntu-web2py:~$ sudo a2enmod wsgi
anees@ubuntu-web2py:~$ sudo a2enmod ssl
anees@ubuntu-web2py:~$ sudo a2enmod proxy
anees@ubuntu-web2py:~$ sudo a2enmod proxy_http
anees@ubuntu-web2py:~$ sudo a2enmod headers
anees@ubuntu-web2py:~$ sudo a2enmod expires
anees@ubuntu-web2py:~$ sudo a2enmod rewrite
</pre></div>
</div>
</div>
<div class="section" id="create-ssl-certificate">
<h3><a class="toc-backref" href="#id6">Create SSL Certificate</a><a class="headerlink" href="#create-ssl-certificate" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span></span>anees@ubuntu-web2py:~$ sudo mkdir /etc/apache2/ssl
anees@ubuntu-web2py:~$ sudo sh -c <span class="s1">&#39;openssl genrsa 1024 &gt; /etc/apache2/ssl/self_signed.key&#39;</span>

anees@ubuntu-web2py:~$ sudo chmod <span class="m">400</span> /etc/apache2/ssl/self_signed.key

anees@ubuntu-web2py:~$ sudo sh -c <span class="s1">&#39;openssl req -new -x509 -nodes -sha1 -days 365 -key /etc/apache2/ssl/self_signed.key &gt; /etc/apache2/ssl/self_signed.cert&#39;</span>
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter <span class="s1">&#39;.&#39;</span>, the field will be left blank.
-----
Country Name <span class="o">(</span><span class="m">2</span> letter code<span class="o">)</span> <span class="o">[</span>AU<span class="o">]</span>:US
State or Province Name <span class="o">(</span>full name<span class="o">)</span> <span class="o">[</span>Some-State<span class="o">]</span>:CA
Locality Name <span class="o">(</span>eg, city<span class="o">)</span> <span class="o">[]</span>:San Jose
Organization Name <span class="o">(</span>eg, company<span class="o">)</span> <span class="o">[</span>Internet Widgits Pty Ltd<span class="o">]</span>:Arista
Organizational Unit Name <span class="o">(</span>eg, section<span class="o">)</span> <span class="o">[]</span>:Services
Common Name <span class="o">(</span>e.g. server FQDN or YOUR name<span class="o">)</span> <span class="o">[]</span>:ubuntu-web2py.mylab.com
Email Address <span class="o">[]</span>:admin@mylab.com

anees@ubuntu-web2py:~$ sudo sh -c <span class="s1">&#39;sudo openssl x509 -noout -fingerprint -text &lt; /etc/apache2/ssl/self_signed.cert &gt; /etc/apache2/ssl/self_signed.info&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="install-web2py">
<h2><a class="toc-backref" href="#id7">Install Web2Py</a><a class="headerlink" href="#install-web2py" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash"><div class="highlight"><pre><span></span>anees@ubuntu-web2py:~$ <span class="nb">cd</span> /home
anees@ubuntu-web2py:/home$
anees@ubuntu-web2py:/home$ sudo mkdir www-data
anees@ubuntu-web2py:/home$ <span class="nb">cd</span> www-data/

anees@ubuntu-web2py:/home/www-data$ sudo wget http://web2py.com/examples/static/web2py_src.zip

anees@ubuntu-web2py:/home/www-data$ sudo unzip web2py_src.zip
anees@ubuntu-web2py:/home/www-data$ sudo mv web2py/handlers/wsgihandler.py web2py/wsgihandler.py

anees@ubuntu-web2py:/home/www-data$ sudo chown -R www-data:www-data web2py
</pre></div>
</div>
<div class="section" id="configure-apache-to-use-mod-wsgi">
<h3><a class="toc-backref" href="#id8">Configure Apache to use mod_wsgi</a><a class="headerlink" href="#configure-apache-to-use-mod-wsgi" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash"><div class="highlight"><pre><span></span>anees@ubuntu-anees-1:~$ <span class="nb">cd</span> /etc/apache2/sites-available

anees@ubuntu-anees-1:/etc/apache2/sites-available$ sudo vi web2py.conf

WSGIDaemonProcess web2py <span class="nv">user</span><span class="o">=</span>www-data <span class="nv">group</span><span class="o">=</span>www-data <span class="nv">processes</span><span class="o">=</span><span class="m">1</span> <span class="nv">threads</span><span class="o">=</span>1

&lt;VirtualHost *:80&gt;

  RewriteEngine On
  RewriteCond %<span class="o">{</span>HTTPS<span class="o">}</span> !<span class="o">=</span>on
  RewriteRule ^/?<span class="o">(</span>.*<span class="o">)</span> https://%<span class="o">{</span>SERVER_NAME<span class="o">}</span>/<span class="nv">$1</span> <span class="o">[</span>R,L<span class="o">]</span>

  CustomLog /var/log/apache2/access.log common
  ErrorLog /var/log/apache2/error.log
&lt;/VirtualHost&gt;

&lt;VirtualHost *:443&gt;
  SSLEngine on
  SSLCertificateFile /etc/apache2/ssl/self_signed.cert
  SSLCertificateKeyFile /etc/apache2/ssl/self_signed.key

  WSGIProcessGroup web2py
  WSGIScriptAlias / /home/www-data/web2py/wsgihandler.py
  WSGIPassAuthorization On

  &lt;Directory /home/www-data/web2py&gt;
    AllowOverride None
    Require all denied
    &lt;Files wsgihandler.py&gt;
      Require all granted
    &lt;/Files&gt;
  &lt;/Directory&gt;

  AliasMatch ^/<span class="o">([</span>^/<span class="o">]</span>+<span class="o">)</span>/static/<span class="o">(</span>?:_<span class="o">[</span><span class="se">\d</span><span class="o">]</span>+.<span class="o">[</span><span class="se">\d</span><span class="o">]</span>+.<span class="o">[</span><span class="se">\d</span><span class="o">]</span>+/<span class="o">)</span>?<span class="o">(</span>.*<span class="o">)</span> <span class="se">\</span>
        /home/www-data/web2py/applications/<span class="nv">$1</span>/static/<span class="nv">$2</span>

  &lt;Directory /home/www-data/web2py/applications/*/static/&gt;
    Options -Indexes
    ExpiresActive On
    ExpiresDefault <span class="s2">&quot;access plus 1 hour&quot;</span>
    Require all granted
  &lt;/Directory&gt;

  CustomLog /var/log/apache2/ssl-access.log common
  ErrorLog /var/log/apache2/error.log
&lt;/VirtualHost&gt;

:wq!

anees@ubuntu-web2py:/etc/apache2/sites-available$ <span class="nb">cd</span> ..
anees@ubuntu-web2py:/etc/apache2$ <span class="nb">cd</span> sites-enabled/
anees@ubuntu-web2py:/etc/apache2/sites-enabled$ sudo rm *.*
anees@ubuntu-web2py:/etc/apache2/sites-enabled$ sudo a2ensite web2py

anees@ubuntu-anees-1:/etc/apache2/sites-available$ sudo service apache2 restart
</pre></div>
</div>
</div>
</div>
<div class="section" id="start-web2py-service">
<h2><a class="toc-backref" href="#id9">Start Web2Py Service</a><a class="headerlink" href="#start-web2py-service" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash"><div class="highlight"><pre><span></span>anees@ubuntu-anees-1:/etc/apache2/sites-available$ <span class="nb">cd</span> /home/www-data/web2py

anees@ubuntu-anees-1:/home/www-data/web2py $
sudo -u www-data python -c <span class="s2">&quot;from gluon.widget import console; console();&quot;</span>

anees@ubuntu-anees-1:/home/www-data/web2py $
sudo -u www-data python -c <span class="s2">&quot;from gluon.main import save_password; save_password(raw_input(&#39;admin password: &#39;),443)&quot;</span>

***** You will be prompted to setup the web2py admin password ****
admin password:
</pre></div>
</div>
<div class="section" id="verify-web2py-portal">
<h3><a class="toc-backref" href="#id10">Verify Web2Py Portal</a><a class="headerlink" href="#verify-web2py-portal" title="Permalink to this headline">¶</a></h3>
<p>Verify the web2py portal by launching from your browser. In our example, we will launch web2py portal using the url <a class="reference external" href="https://172.28.170.197">https://172.28.170.197</a>.</p>
<img alt="_images/ch06-pic1.png" src="_images/ch06-pic1.png" />
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="web2py-introduction.html" class="btn btn-neutral" title="Chapter 5: Web2Py Introduction" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Anees Mohammed.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>